---
title: 'テスト領域 3: チェックアウトの取り消し |Microsoft Docs'
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- source control plug-ins, checkout
- source control plug-ins, undo checkout
- source control [Visual Studio SDK], checking out
- source control [Visual Studio SDK], undo checkout
ms.assetid: ce00c5a5-d472-4f45-8776-d77a1fbe9d37
author: madskristensen
ms.author: madsk
manager: jillfra
ms.workload:
- vssdk
ms.openlocfilehash: 44abff5adedf8e0cccfb0d5e44486aaa8f36ff12
ms.sourcegitcommit: 5f6ad1cefbcd3d531ce587ad30e684684f4c4d44
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 10/22/2019
ms.locfileid: "72722559"
---
# <a name="test-area-3-check-outundo-checkout"></a>テスト領域 3: チェックアウト/チェックアウトの取り消し
このソース管理プラグインのテスト領域では、チェックアウトと**チェックアウトの取り消し**コマンドを使用して **、バージョン**ストアの項目の編集と復帰を行います。

**チェックアウト: バージョン**ストア内の項目をチェックアウト済みとしてマークし、ローカルコピーを読み取り/書き込みに変更します。

**チェックアウトの取り消し**: バージョンストア内の項目をチェックイン済みとしてマークし、チェックアウトの前にローカルコピーを状態に戻します (オプションによって異なります)。

## <a name="command-menu-access"></a>コマンドメニューへのアクセス

テストケースでは、次の [!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)] 統合開発環境メニューパスが使用されます。

##### <a name="check-out"></a>チェックアウト：

- **ファイル**、**ソース管理**、**チェックアウト。**

- **ファイル**を**チェックアウトします**。

- ショートカットメニュー**で、チェックアウトし**ます。

- チェックアウトを元に戻す:**ファイル**、**ソース管理**、**チェックアウトの取り消し**。

## <a name="common-expected-behavior"></a>想定される一般的な動作

- チェックアウト操作の後、ターゲットファイルまたはフォルダーは、バージョンストアでチェックアウト済みとしてマークされます。

- バージョンストアは、正しいユーザーにチェックアウトを属性します。

- チェックアウトの時刻と日付は、(ユーザーの設定に従って) 正しいことを示します。

## <a name="test-cases"></a>テスト ケース

次に示すのは、チェックアウト/取り消しのテスト領域の特定のテストケースです。

### <a name="case-3a-check-out"></a>ケース 3a: チェックアウト

このセクションでは、チェックアウトコマンドの操作に焦点を当てます。

|操作|テストステップ|確認が必要な結果|
|------------|----------------|--------------------------------|
|排他 (COE) クライアントプロジェクトをチェックアウトする|1. クライアントプロジェクトを作成します。<br />2. ソース管理にソリューションを追加します。<br />3. プロジェクト全体を排他的にチェックアウトします (**ファイル**、**チェックアウト)。**|チェックアウトが発生します。|
|排他 (COE) ファイルシステムまたはローカル IIS Web プロジェクトをチェックアウトする|1. **ツール**、**オプション**、**プロジェクト**、**Web 設定** で、web サーバー接続 を ファイル共有 に設定します。<br />2. Web プロジェクトを作成します。<br />3. ソリューションをソース管理に追加します。<br />4. プロジェクト全体を排他**的にチェックアウト**します (**ファイル**、**ソース管理**、チェックアウト)。|チェックアウトが発生します。|
|ソリューションのソリューション項目をチェックアウトする (他のファイルを処理するための新しいメソッド)|1. 空のソリューションを作成します。<br />2. ソース管理にソリューションを追加します。<br />3. ソリューションを確認します。<br />4. ソリューション項目をいくつか追加します。<br />5. 新しく追加されたすべての項目をチェックインします。<br />6. 複数のソリューション項目を選択します。<br />7. 選択した項目を確認します (ショートカットメニュー、**チェックアウト)。**|選択したファイルがチェックアウトされます。|
|ローカルバージョンをチェックアウトする (テスト対象のプラグインがこの機能をサポートしている場合)|1. ユーザー 1: クライアントプロジェクトを作成します。<br />2. ユーザー 1: ソース管理にソリューションを追加します。<br />3. ユーザー 2: ソース管理から別の場所にソリューションを開きます。<br />4. ユーザー 2: ファイルをチェックアウトします。<br />5. ユーザー 2: ファイルを変更します。<br />6. ユーザー 2: ファイルをチェックインします。<br />7. ユーザー 1: ローカルバージョンのファイルをチェックアウトします ( **[チェックアウト] ダイアログボックス**の [**ローカルバージョン**の詳細設定] チェックボックスをオンにします)。|ファイルのローカルバージョンがチェックアウトされています。<br /><br /> ユーザー2による変更は、ユーザー1ファイルには適用されません。|

### <a name="case-3b-disconnected-check-out"></a>ケース 3b: 切断されたチェックアウト

切断モードで動作すると、バージョンストアに直接アタッチされていない場合でも、任意のレベルのソース管理サポートを使用できます。 これは、参加しているソリューションとプロジェクトに関するすべての関連情報をローカルにキャッシュすることによって行われます。

排他チェックアウト操作は、ソース管理ストアに接続しているときにのみ実行できます。 共有チェックアウト操作は、接続されているか切断されているかにかかわらず、いつでも発生する可能性があります。 そのため、バージョンストアから切断されている場合は、**チェックアウト共有**(COS) コマンドのみが有効になります。 接続が切断されている間は、古いバージョンを取得してユーザーが行った変更を置き換えることができないため、**チェックアウトを元に戻す**ことはできません。

ユーザーがバージョンストアに再接続すると、参加しているすべてのソリューションとプロジェクトのチェックアウト状態が同期されます。 これにより、ユーザーが実行したチェックアウトのストアに対して必要な更新が行われます。 同期が完了すると、ユーザーは通常どおり (接続) することができます。

#### <a name="expected-behavior"></a>想定される動作

- バージョンストアから切断されている間は、[**排他**のチェックアウト] コマンドを使用できません。

- バージョンストアから切断されている間は、 **[チェックアウトの取り消し]** コマンドを使用できません。

- **共有チェックアウト**コマンドが機能します。

|操作|テストステップ|確認が必要な結果|
|------------|----------------|--------------------------------|
|接続が切断された状態で、ファイルをチェックアウトし、同期のために接続します。|1. ソース管理の変更 ダイアログボックス (**ファイル**、**ソース管理**、**ソース管理の変更**) を使用して、制御されたプロジェクトを切断します。<br />2. ファイルをチェックアウトします。<br />3. 警告ダイアログボックスで [チェックアウト (切断)] をクリックします。<br />4. ファイルを編集します。<br />5. [ソース管理の変更] ダイアログボックスを使用して接続します。<br />6. 編集されたファイルの最新バージョンを取得します。|想定される一般的な動作|

### <a name="case-3c-query-editquery-save-qeqs"></a>ケース 3c: クエリの編集/クエリの保存 (QEQS)
 ソース管理下の項目は、ユーザーがファイルを簡単に管理できるように、編集、変更、および保存のために追跡されます。 "チェックイン" されている管理対象の項目が編集されると、QEQS は編集しようとした編集をインターセプトし、ユーザーにファイルをチェックアウトして編集するかどうかを確認します。 **ツール**、**オプション**の設定によっては、ユーザーはファイルをチェックアウトして編集するか、メモリ内のコピーを編集して後で確認することができます。 ユーザーの **ツール** の **オプション** 設定が チェックアウト ダイアログボックスを表示するように設定されておらず、チェックアウトするだけの場合は、ユーザーが編集を行ったときに、可能な限りファイルが自動的にチェックアウトされます。

#### <a name="expected-behavior"></a>想定される動作

- チェックアウト操作の後、ターゲットファイルまたはフォルダーは、バージョンストアでチェックアウト済みとしてマークされます。

- バージョンストアは、正しいユーザーへのチェックアウトを属性します。

- チェックアウトの日時が正しい (ユーザーの設定によって)。

- ターゲットファイルまたはフォルダーのローカルコピーは書き込み可能です。

|操作|テストステップ|確認が必要な結果|
|------------|----------------|--------------------------------|
|チェックインされているテキストファイルの編集|1. テキストファイルを含む新しいプロジェクトを作成します。<br />2. ソース管理にソリューションを追加します。<br />3. **[ツール]** 、 **[オプション]** 、 **[ソース管理]** を設定し、 **[ディスクで読み取り専用のファイルを編集できるよう**にする] をオフにします。<br />4. **[チェックインしたファイルが編集されたとき]** コンボボックスで、 **[ツール]** 、 **[オプション]** 、 **[ソース管理]** 、チェックアウト **[を]** 確認する を設定します。<br />5. **[チェックインされたファイルを保存したとき]** コンボボックスで、 **[ツール]** 、 **[オプション]** 、 **[ソース管理]** 、チェックアウト **[を]** 確認する を設定します。<br />6. エディターでテキストファイルを開き、ファイルに新しいテキストを入力します。 この手順が成功した場合は、次の手順に進みます。<br />7. **[編集用に]** チェックアウト ダイアログボックスで **[キャンセル]** をクリックします。 この手順が成功した場合は、次の手順に進みます。<br />8. **[ツール]** 、 **[オプション]** 、 **[ソース管理]** を設定し、 **[読み取り専用のファイルを編集できるよう**にする] をオンにします。<br />9. エディターでプロジェクトファイルを開き、ファイルに新しいテキストを入力します。 この手順が成功した場合は、次の手順に進みます。<br />10. **[編集用に]** チェックアウト ダイアログボックスで **[編集]** をクリックします。 この手順が成功した場合は、次の手順に進みます。<br />11. テキストファイルを編集して保存します。|`Result of step 6:`<br /><br /> [編集用にチェックアウト] ダイアログボックスが表示されます。<br /><br /> `Result of step 7:`<br /><br /> ファイルは変更されていません。<br /><br /> `Result of step 9:`<br /><br /> [編集用にチェックアウト] ダイアログボックスが表示されます。<br /><br /> `Result of step 10:`<br /><br /> メモリ内のプロジェクトファイルを編集できます。<br /><br /> `Result of step 11:`<br /><br /> 保存時に、[保存時にチェックアウト] ダイアログボックスが表示されます。|
|チェックインされたソリューションファイルを編集する|前のテストで説明した手順を繰り返しますが、テキストファイルを変更するのではなく、ソリューションのプロパティを変更してソリューションを変更します。|前回のテストと同じ|
|チェックインされているプロジェクトファイルの編集|前のテストで説明した手順を繰り返しますが、テキストファイルを変更するのではなく、プロジェクトのプロパティを変更してプロジェクトを変更します。|前回のテストと同じです。|

### <a name="case-3d-silent-check-out"></a>ケース 3d: サイレントチェックアウト
 このサブ領域では、ユーザーの **ツール**、**オプション**、**ソース管理の設定** で チェックアウト ダイアログボックスが表示されないシナリオを**確認します**。

#### <a name="expected-behavior"></a>想定される動作

- チェックアウト操作の後、ターゲットファイルまたはフォルダーは、バージョンストアでチェックアウト済みとしてマークされます。

- バージョンストアは、正しいユーザーへのチェックアウトを属性します。

- チェックアウトの日時が正しい (ユーザーの設定によって)。

- ターゲットファイルまたはフォルダーのローカルコピーは書き込み可能です。

|操作|テストステップ|確認が必要な結果|
|------------|----------------|--------------------------------|
|ファイルのサイレントチェックアウト|1. **[ツール]** 、 **[オプション]** 、 **[ソース管理]** を設定し**て、編集時にファイルを自動的にチェックアウト**します。<br />2. ファイルを使用して新しいプロジェクトを作成します。<br />3. ソリューションをソース管理に追加します。<br />4. ファイルをチェックアウトします。|ファイルがサイレントモードでチェックアウトされます (UI なし)。|
|プロジェクトのサイレントチェックアウト|1. **[ツール]** 、 **[オプション]** 、 **[ソース管理]** を設定し**て、編集時にファイルを自動的にチェックアウト**します。<br />2. 新しいプロジェクトを作成します。<br />3. ソリューションをソース管理に追加します。<br />4. プロジェクトをチェックアウトします。|ファイルがサイレントモードでチェックアウトされます (UI なし)。|

### <a name="case-3e-undo-check-out"></a>ケース 3e: チェックアウトを元に戻す
 [チェックアウトの**取り消し**] は、ファイルのチェックアウト状態を取り消すために使用され、ファイルに加えられた変更をチェックインしないようにします。

#### <a name="expected-behavior"></a>想定される動作

- 既定値は、ユーザーの [**ローカルバージョン**のチェックアウト] の設定に基づいています。 ユーザーがローカルバージョンをチェックアウトすることを選択した場合、チェックアウトの取り消しの既定値は常に、チェックアウトされているバージョンに戻ります。

- 元に戻す操作を承諾すると、**ソリューションエクスプローラー**のアイコンが影響を受けるファイルに対して更新され、 **[保留中のチェックイン]** ウィンドウから項目が削除されます。

|操作|テストステップ|確認が必要な結果|
|------------|----------------|--------------------------------|
|排他的にチェックアウトされた1つのファイルのチェックアウトを元に戻す|1. クライアントプロジェクトを作成します。<br />2. ソース管理にソリューションを追加します。<br />3. ファイルを排他的にチェックアウトします。<br />4. ファイルを変更します。<br />5. チェックアウトを元に戻す (**ファイル**、**ソース管理**、**チェックアウトを元に戻す**)。|予期される動作は一般的です。|
|共有チェックアウトされている1つのファイルのチェックアウトを元に戻す|1. クライアントプロジェクトを作成します。<br />2. ソース管理にソリューションを追加します。<br />3. 共有ファイルをチェックアウトします。<br />4. ファイルを変更します。<br />5. チェックアウトを元に戻す (**ファイル**、**ソース管理**、**チェックアウトを元に戻す**)。|予期される動作は一般的です。|
|プロジェクトにファイルを追加した後、プロジェクトのチェックアウトを元に戻す|1. 新しいプロジェクトを作成し、ソース管理に追加します。<br />2. プロジェクトをチェックアウトします。<br />3. プロジェクトにファイルを追加します。<br />4. プロジェクトのチェックアウトを元に戻します。|追加されたファイルは、ソリューションエクスプローラーのプロジェクトから削除されます。<br /><br /> プロジェクトはチェックアウトされていません。|
|プロジェクトからファイルを削除した後、プロジェクトのチェックアウトを元に戻す|1. 新しいプロジェクトを作成し、ソース管理に追加します。<br />2. プロジェクトをチェックアウトします。<br />3. プロジェクトからファイルを削除します。<br />4. プロジェクトのチェックアウトを元に戻します。|削除されたファイルは、ソリューションエクスプローラーのプロジェクトの下に表示されます。<br /><br /> プロジェクトはチェックアウトされていません。|

## <a name="see-also"></a>関連項目
- [ソース管理プラグイン向けのテスト ガイド](../../extensibility/internals/test-guide-for-source-control-plug-ins.md)
